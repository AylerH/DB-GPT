# 创建

# 待实现


## 模型管理
### 模型编辑与测试模型连通性
模型管理中要求可以编辑并测试模型连通性。
编辑模型应该能够看到当初创建模型时包含的信息并修改。
编辑模型返回的都是固定的内容，不是指定模型的。
数据库导入内容时应该要选择指定embeding模型。
编辑模型显示的模型信息不全；

# 已实现
## 知识库的es配置
### rag启用-增加es和知识库
要求前端增加知识库功能，可以上传文件，并按文件夹区分所属知识库；
embedding相关模型要求也可以通过openai兼容形式从.env中配置；
ELASTICSEARCH_URL=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=dbgpt，是不是可以把es配置到docker compose

报错：
```
[SERVER_ERROR]HTTPConnectionPool(host='localhost', port=8100): Max retries exceeded with url: /api/v1/embeddings (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f03b0355650>: Failed to establish a new connection: [Errno 111] Connection refused'))
```
### 不需要的
在左侧菜单栏添加知识库按钮，要求可以上传文件并rag。把左侧的知识库按钮去掉吧，因为应用管理里已经包含了。

## openai兼容模式的.env配置
api_key等的前端配置
改为可以自己输入openai兼容形式的url和api key

### 测试连通性；
点击测试连接没有任务反应，而且也没有编辑模型的按钮。
模型连通性测试应该加在图示所在页面。
.env中模型的也配置到storage；

测试连接http://127.0.0.1:5670/api/v2/serve/model/models/test报错：{
    "success": false,
    "err_code": "E000X",
    "err_msg": "Connection failed: 405 {\"detail\":\"Method Not Allowed\"}",
    "data": null
}

### 无用模型删不掉
模型停止不掉，编辑模型显示内容不全。Request error
model stop failed No worker instance found for the model bge-m3:latest worker type text2vec

```
http://127.0.0.1:5670/api/v2/serve/model/models/stop{
  "host": "172.25.0.4",
  "port": 5670,
  "model": "bge-m3:latest",
  "worker_type": "text2vec",
  "delete_after": true,
  "params": {}
}{
    "success": false,
    "err_code": "E000X",
    "err_msg": "model stop failed No worker instance found for the model bge-m3:latest worker type text2vec",
    "data": null
}
```